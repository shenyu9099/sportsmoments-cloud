<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æµ‹è¯• Application Insights</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
        }
        button {
            padding: 10px 20px;
            margin: 10px;
            font-size: 16px;
            cursor: pointer;
            background-color: #0078d4;
            color: white;
            border: none;
            border-radius: 4px;
        }
        button:hover {
            background-color: #005a9e;
        }
        #log {
            margin-top: 20px;
            padding: 15px;
            background-color: #f0f0f0;
            border-radius: 4px;
            min-height: 200px;
        }
        .log-item {
            padding: 5px;
            margin: 5px 0;
            background-color: white;
            border-left: 3px solid #0078d4;
            padding-left: 10px;
        }
    </style>
</head>
<body>
    <h1>Application Insights æµ‹è¯•é¡µé¢</h1>
    <p>ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®æ¥æµ‹è¯• Application Insights äº‹ä»¶è¿½è¸ªï¼š</p>
    
    <div>
        <button onclick="testPageView()">æµ‹è¯•é¡µé¢æµè§ˆ</button>
        <button onclick="testCustomEvent()">æµ‹è¯•è‡ªå®šä¹‰äº‹ä»¶</button>
        <button onclick="testException()">æµ‹è¯•å¼‚å¸¸æ•è·</button>
        <button onclick="testMetric()">æµ‹è¯•æŒ‡æ ‡</button>
    </div>
    
    <div id="log">
        <div class="log-item">ç­‰å¾…æ“ä½œ...</div>
    </div>

    <!-- Application Insights -->
    <script src="appinsights.js"></script>
    
    <script>
        function log(message) {
            const logDiv = document.getElementById('log');
            const logItem = document.createElement('div');
            logItem.className = 'log-item';
            logItem.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            logDiv.appendChild(logItem);
        }
        
        function testPageView() {
            if (window.appInsights) {
                window.appInsights.trackPageView({
                    name: 'TestPage',
                    properties: {
                        testType: 'manual',
                        timestamp: new Date().toISOString()
                    }
                });
                log('âœ… é¡µé¢æµè§ˆäº‹ä»¶å·²å‘é€');
            } else {
                log('âŒ Application Insights æœªåˆå§‹åŒ–');
            }
        }
        
        function testCustomEvent() {
            if (window.appInsights) {
                window.appInsights.trackEvent({
                    name: 'TestCustomEvent',
                    properties: {
                        testType: 'custom',
                        userId: 'test-user-001',
                        action: 'button-click',
                        timestamp: new Date().toISOString()
                    }
                });
                log('âœ… è‡ªå®šä¹‰äº‹ä»¶å·²å‘é€');
            } else {
                log('âŒ Application Insights æœªåˆå§‹åŒ–');
            }
        }
        
        function testException() {
            if (window.appInsights) {
                try {
                    throw new Error('è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•å¼‚å¸¸');
                } catch (error) {
                    window.appInsights.trackException({
                        exception: error,
                        properties: {
                            testType: 'exception'
                        }
                    });
                    log('âœ… å¼‚å¸¸äº‹ä»¶å·²å‘é€');
                }
            } else {
                log('âŒ Application Insights æœªåˆå§‹åŒ–');
            }
        }
        
        function testMetric() {
            if (window.appInsights) {
                window.appInsights.trackMetric({
                    name: 'TestMetric',
                    average: 42,
                    properties: {
                        testType: 'metric'
                    }
                });
                log('âœ… æŒ‡æ ‡äº‹ä»¶å·²å‘é€');
            } else {
                log('âŒ Application Insights æœªåˆå§‹åŒ–');
            }
        }
        
        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥ Application Insights
        window.addEventListener('load', () => {
            setTimeout(() => {
                if (window.appInsights) {
                    log('âœ… Application Insights å·²æˆåŠŸåˆå§‹åŒ–');
                    log(`ğŸ“Š Instrumentation Key: b86132f4-262b-4a38-acf1-2dfa2ada6256`);
                } else {
                    log('âŒ Application Insights åˆå§‹åŒ–å¤±è´¥');
                }
            }, 1000);
        });
    </script>
</body>
</html>

